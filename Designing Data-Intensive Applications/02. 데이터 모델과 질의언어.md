## 데이터 모델과 질의 언어 
해결하려는 문제를 어떻게 생각해야 하는지 

하나의 데이터 모델을 다른 데이터 모델 위에 계층을 둬서 만들때 
다음 하위 계층 관점에서 데이터 모델을 표현하는 방법 
- josn/XML/관계형/그래프 데이터를 메모리나 디스크 또는 네트워크 상의 바이트 단위로 표현하는 방법 결정 -> 데이터를 질의, 탐색, 조작, 처리 가능 


각 계층은 명확한 데이터 모델을 제공해 하위 계층의 복잡성을 숨긴다. 
*데이터 모델은 그 위에서 소프트웨어가 할 수 있는 일과 할 수 없는 일에 지대한 영향을 주므로 애플리케이션에 적합한 데이터 모델을 선택하는 작업이 중요함 

종류 : 관계형 모델 (relational model), 문서 모델 (document model), 그래프 기반 데이터 모델 (graph-based data model)



## 관계형 모델과 문서 모델 

데이터가 관계 (relation) 로 구성되고 관계는 순서 없는 튜플(tuple) 모음 
relational database management system (RDBMS)



## NOSQL

배경
- 대규모 데이터셋이나 매우 높은 쓰기 처리량 달성을 관계형 데이터베이스보다 쉽게 할 수 있는 뛰어난 확장성의 필요
- 무료 오픈 소스 소프트웨어 선호도 확산 
- 관계형 모델에서 지원하지 않는 특수 질의 동작
- 관계형 스키마의 제한에 대한 불만과 더욱 동적이고 표현력이 풍부한 데이터 모델에 대한 바람 



## 객체 관계형 불일치 
- 대부분의 애플리케이션 개발 : 객체지향 프로그래밍 언어 
- 애플리케이션 코드와 데이터베이스 모델 객체 사이에 전환계층이 필요하다. (모델사이의 분리 : 임피던스 불일치(impedance mismatch))
- Active Record 는 객체가 DB 를 직접 다루고, Hibernate 는 객체와 DB 를 분리한다. (객체 관계형 매핑 프레임워크는 전환 계층시 필요한 Boilerplate code 의 양을 줄이지만, 두 모델 간의 차이를 완벽히 숨길 수 없다.)
- 문서 데이터 베이스 : 문서 (JSON, BSON, XML) 를 그대로 저장하고 조회



## 네트워크 모델
- 네트워크 모델에서 레코드는 다중 부모가 있을 수 있다. 
- 레코드 간 연결은 외래 키보다는 프로그래밍 언어의 포인터와 더 비슷하다. 
- 레코드에 접근하는 유일한 방법은 최사우이 레코드에서부터 연속된 연결 경로를 따르는 방법이다. (접근 경로)


## 애플리케이션 코드를 간단하게 할 수 있는 데이터 모델
- 데이터 항목 간에 존재하는 관계 유형에 따라서 사용할 수 있는 데이터 모델이 다르다. 상호 연결이 많은 데이터의 경우 문서 모델은 곤란하지만 관계형 모델은 무난하며
그래프 모델은 매우 자연스럽다. 



*관계형과 문서의 혼합 모델은 미래 데이터베이스들이 가야 할 방향이다. 

## 맵리듀스 
- MapReduce : 많은 컴퓨터에서 대량의 데이터를 처리하기 위한 프로그래밍 모델 
- 맵리듀스는 선언형 질의 언어도 완전한 명령형 질의 API 도 아닌 그 중간 정도에 있다. 
- map(collect), reduce(fold, inject) 함수를 기반으로 한다. 


몽고 DB 의 map 과 reduce 함수는 수행할 때 약간 제약 사항이 있다. 
두 함수는 순수(pure) 함수여야 한다. 
즉 입력으로 전달된 데이터만 사용하고, 추가적인 데이터베이스 질의를 수행할 수 없어야 하며 부수 효과(side effect) 가 없어야 한다. 
-> 데이터베이스가 임의 순서로 어디서나 이 함수를 실행 할 수 있고 장애가 발생해도 함수를 재실행할 수 있다. 


## 그래프형 데이터 모델 

- 관계형 모델은 단순한 다대다 관계를 다룰 수 있지만 데이터 간 연결이 더 복잡해지면 그래프로 데이터를 모델링하기 시작하는 편이 더 자연스럽다. 
- 그래프 : 정점(vertex : 노드, 엔티티), 간선(edge : 관계, 호arc) 로 이루어져 있다. 


## 사이퍼 질의 언어
- 사이퍼 : 속성 그래프를 위한 선언형 질의 언어


정리 

- 문서 데이터베이스는 데이터가 문서 자체에 포함돼 있으면서 하나의 문서와 다른 문서 간 관계가 거의 없는 사용 사례 대상
- 그래프 데이터베이스 : 문서 데이터베이스와는 정반대로 모든 것이 잠재적으로 관련 있다는 사용 사례 대상 



















